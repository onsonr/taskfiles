version: '3'

tasks:
  download:
    desc: Install go dependencies
    silent: true
    vars:
      DEPS:
        [
          "github.com/apple/pkl-go/cmd/pkl-gen-go@latest",
          "github.com/sqlc-dev/sqlc/cmd/sqlc@latest",
          "github.com/goreleaser/goreleaser/v2@latest",
          "github.com/a-h/templ/cmd/templ@latest",
        ]
    cmds:
      - for: { var: DEPS }
        cmd: gum spin --spinner dot --title "Installing go dependencies..." -- go install {{.ITEM}}


  info-*:
    vars:
      TEXT: '{{index .MATCH 0}}'
    cmds:
      - gum log -l info {{.TEXT}}

  warn-*:
    vars:
      TEXT: '{{index .MATCH 0}}'
    cmds:
      - gum log -l warn {{.TEXT}}

  error-*:
    vars:
      TEXT: '{{index .MATCH 0}}'
    cmds:
      - gum log -l error {{.TEXT}}

  debug-*:
    vars:
      TEXT: '{{index .MATCH 0}}'
    cmds:
      - gum log -l debug {{.TEXT}}
